{% extends 'base.html' %}

{% block content %}
<h1>Workout Routine Analysis: {{ routine.routine_name }}
    {% if routine.workout_type and routine.workout_type != 'OTHER' %}
    ({{ routine.workout_type|upper }})
{% endif %}

</h1>

<h2>Trained Muscle Groups</h2>
<table class="table">
    <thead>
        <tr>
            <th>Muscle Group</th>
            <th>Number of Exercises</th>
            <th>Total Series</th>
        </tr>
    </thead>
    <tbody>
        {% for muscle, stats in trained_muscles.items %}
        <tr>
            <td>{{ muscle|title }}</td>
            <td>{{ stats.exercise_count }}</td>
            <td>{{ stats.total_series }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2>Untrained Muscle Groups</h2>
<ul>
    {% for muscle in untrained_muscles %}
    <li>{{ muscle|title }}</li>
    {% endfor %}
</ul>

{% if repetition_range_check %}
<h2>Repetition Range Analysis</h2>
<p>Total exercises analyzed: {{ repetition_range_check.total_exercises }}</p>
<p>Exercises in 8-12 repetition range: {{ repetition_range_check.exercises_in_range }}</p>
<p>Percentage: {{ repetition_range_check.percentage }}%</p>
<p>
    {% if repetition_range_check.meets_criteria %}
    <strong style="color: green;">You have enought exercises in 8-12 repetition range</strong>
    {% else %}
    <strong style="color: red;">Over half of important exercises are not in 8-12 range. Consider adjusting Your schedule.</strong>
    {% endif %}
</p>
{% else %}
<p>Repetition range analysis is not applicable for advanced fitness levels.</p>
{% endif %}

<h2>Pull vs Push Analysis</h2>
<p>Total Pull Series: {{ pull_push_analysis.pull_series }}</p>
<p>Total Push Series: {{ pull_push_analysis.push_series }}</p>
<p>Pull to Push Ratio: {{ pull_push_analysis.pull_push_ratio }}</p>

{% if pull_push_analysis.pull_deficit %}
    <p class="alert alert-warning">
        <strong>Warning:</strong> Your workout routine has a deficit of pull exercises. 
        Consider adding more pull exercises to balance your routine.
    </p>
{% elif pull_push_analysis.push_deficit %}
    <p class="alert alert-warning">
        <strong>Warning:</strong> Your workout routine has a deficit of push exercises. 
        Consider adding more push exercises to balance your routine.
    </p>
{% else %}
    <p class="alert alert-success">
        Your pull to push ratio is well-balanced.
    </p>
{% endif %}

<a href="{% url 'workout_routine_detail' routine.pk %}" class="btn btn-primary mt-3">Back to Routine Details</a>
{% endblock %}